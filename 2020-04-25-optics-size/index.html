<!DOCTYPE html>
<html lang='en'>
  <head><title>Optics size | fp-tower blog</title>
<meta charset='utf-8'>
<meta name = 'viewport' content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
<meta http-equiv = 'X-UA-Compatible' content = 'IE=edge'>
<meta property = 'og:locale' content = 'en_US' />
<meta property = 'og:type' content = 'article' />
<meta property = 'og:title' content = 'Optics size' />
<meta property = 'og:description' content = 'In my previous post, I discussed how to change Optional such as we can get useful error messages. The best solution encoded the error type in an extra …'>
<meta property = 'og:url' content = 'https://blog.fp-tower.com/2020-04-25-optics-size/' />
<link rel="icon" type="image/png" sizes="32x32" href='https://blog.fp-tower.com/images/icons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='https://blog.fp-tower.com/images/icons/favicon-16x16.png'>
  
<meta name = 'keywords' content = 'fp-tower blog'>
<meta name="description" content="In my previous post, I discussed how to change Optional such as we can get useful error messages. The best solution encoded the error type in an extra covariant …">
<meta property="og:site_name" content="fp-tower blog">
<meta property="og:title" content="Optics size">
<meta property="og:description" content="In my previous post, I discussed how to change Optional such as we can get useful error messages. The best solution encoded the error type in an extra covariant …">
<meta property="og:type" content="article">
<meta property = 'og:image' content = 'https://blog.fp-tower.com/images/wood-creative-camera-photography.jpg'/>
<meta property="og:url" content="https://blog.fp-tower.com/2020-04-25-optics-size/">
<meta name = 'twitter:card' content = 'summary_large_image' />
<meta name = 'twitter:creator' content = '@fptower'>
<meta name = 'twitter:title' content = 'Optics size' />
<meta property = 'twitter:description'  content = 'In my previous post, I discussed how to change Optional such as we can get useful error messages. The best solution encoded the error type in an extra covariant …'/>
<meta name = 'twitter:image' content = 'https://blog.fp-tower.com/images/wood-creative-camera-photography.jpg' />
  <meta property = 'article:published_time' content = '2020-04-07 00:00:00 &#43;0000 &#43;0000' />
  <script type = "application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": "https:\/\/blog.fp-tower.com\/2020-04-25-optics-size\/",
      "name": "fp-tower blog",
      "headline": "Optics size",
      "description": "In my previous post, I discussed how to change Optional such as we can get useful error messages. The best solution encoded the error type in an extra covariant …",
      "url": "https:\/\/blog.fp-tower.com\/2020-04-25-optics-size\/",
      "datePublished": "2020-04-07T00:00:00Z",
      "dateModified": "2020-04-07T00:00:00Z",
      "author": {
        "@type": "Person",
        "name": "Julien Traffaut"
      },
      "image":{  
        "@type":"ImageObject",
          "url":"https:\/\/blog.fp-tower.com\/images\/wood-creative-camera-photography.jpg"
      },
      "publisher": {
        "@type": "Organization",
        "logo": {
          "@type":"ImageObject",
          "url": "https://blog.fp-tower.com/images/logo.png"
        },
        "name": "fp-tower blog"
      }
    }
  </script>

<link rel = 'canonical' href = 'https://blog.fp-tower.com/2020-04-25-optics-size/'>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&display=swap" rel="stylesheet">
<link rel = 'stylesheet' href = 'https://blog.fp-tower.com/main.6a23a1234458d7749cf785589e706cedc0e2798b9522f693beefd800def839eb128205b2d7fe09e2b1cc87b87c64a970869e29de32f61b65563bd1a022f8c16d.css' integrity = 'sha512-aiOhI0RY13Sc94VYnnBs7cDieYuVIvaTvu/YAN74OesSggWy1/4J4rHMh7h8ZKlwhp4p3jL2G2VWO9GgIvjBbQ=='>

  </head>
  <body>
<header class = 'nav_header nav_fixed nav_home'>
  <div class = 'nav_top wrap'>
    <a class = 'nav_brand' href='https://www.fp-tower.com/'>
      <img src = '/images/logo.png' class = 'nav_logo'>
    </a>
    <nav class = 'nav center'>
      <a href = 'https://www.fp-tower.com' class = 'nav_item '>
        courses
      </a>
      <a href = '/' class = 'nav_item '>
        blog
      </a>
      <a href = '/contact-us/' class = 'nav_item '>
        contact us
      </a>
      <a href = 'https://www.fp-tower.com' class = 'nav_item '>
        jobs
      </a>
    </nav>
    <div class = 'nav_toggle'>&#9776;</div>
  </div>
</header>

    <main>
<div class = 'page_banner' style = 'background-image:url(/images/wood-creative-camera-photography.jpg)'></div>
<div class = 'grid-reverse wrap pt_2'>
  <article class = 'contents'>
    <div class = 'center pb_1'>
      <h1 class = 'excerpt_title'>Optics size</h1>
      <div class = 'meta'>
  <span class = 'meta_date'>April 07, 2020</span>
  <span class = 'meta_separator'>|</span>
  
<span class = 'meta_avatar avatar'>
  <img src = '/images/julien-truffaut.jpg'>
</span>
<span class = 'meta_author'>
  <a href = 'https://twitter.com/JulienTruffaut' target = '_blank' rel = 'noopener' title = 'Julien Truffaut linkedin'>
    julien truffaut 
    <span class = 'meta_tag tag'>FOLLOW</span>
  </a>
</span>

</div>


    </div><p>In my previous <a href="../2020-01-27-introducing-error-reporting-in-optics">post</a>, I discussed how to change
Optional such as we can get useful error messages. The best solution encoded the error type in
an extra covariant type parameter, similar to how <a href="https://zio.dev/docs/overview/overview_index">ZIO</a> error
works. Today, I would like to present how this simple change will have a profound impact on
the optics hierarchy, making it simpler and more expressive at the same time!</p>
<h2 id="optics-hierarchy">Optics hierarchy</h2>
<p>In the current version of <a href="https://github.com/julien-truffaut/Monocle">Monocle</a>, we support the following
optics:</p>
<p><img src="/images/diagrams//monocle2-optics-hierarchy.svg" alt="Optics hierarchy with size"></p>
<p>It is a lot of names and relationships to learn! Even after years of experience, it is intimidating.
Even worse, there is maybe twice that numbers of optics in other libraries: <code>Review</code>, <code>Equivalent</code>,
<code>NonEmptyTraversal</code>, <code>NonEmptyFold</code>, <code>OptionalGetter</code>, <code>Grate</code>, <code>ChromaticLens</code>, ...</p>
<p>Something that always bothered me about Monocle subset is the lack of symmetry. It becomes more clear
when we group optics by number of elements it targets.</p>
<p><img src="/images/diagrams//monocle2-missing-optics-1.svg" alt="Optics hierarchy with size"></p>
<p>We have 3 optics for exactly one target (<code>Iso</code>, <code>Lens</code> and <code>Getter</code>),
3 optics for 0 or more targets (<code>Setter</code>, <code>Fold</code> and <code>Traversal</code>),
but 2 optics for 0 or 1 target (<code>Prism</code> and <code>Optional</code>).</p>
<p>We have optics for 1, 0-1, 0-n targets, but no optics for 1-n targets.</p>
<p>Here is how the hierarchy would look like if add those missing pieces.</p>
<table>
<thead>
<tr>
<th># Targets</th>
<th align="center">Read-Only</th>
<th align="center">Read-Write</th>
<th align="center">Write</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1</strong></td>
<td align="center"><code>Getter</code></td>
<td align="center"><code>Iso</code>, <code>Lens</code></td>
<td align="center">-</td>
</tr>
<tr>
<td><strong>0-1</strong></td>
<td align="center">-</td>
<td align="center"><code>Optional</code>, <code>Prism</code></td>
<td align="center">-</td>
</tr>
<tr>
<td><strong>0-n</strong></td>
<td align="center"><code>Fold</code></td>
<td align="center"><code>Traversal</code></td>
<td align="center"><code>Setter</code></td>
</tr>
</tbody>
</table>
<p><img src="/images/diagrams//optics-hierarchy-size.svg" alt="Optics hierarchy with size"></p>
<p>Adding optics blow up the number of compose methods.</p>

  </article>
  <aside class = 'aside'><div class = 'aside_widget'>
  <h3 class = 'mb_1 font_light'>Tags</h3>
<div class = 'tags'>
  
</div>

<div class = 'tags'>
  
  <a href = 'https://blog.fp-tower.com/tags/monocle/' class = 'tag'>monocle</a>
   
  <a href = 'https://blog.fp-tower.com/tags/scala/' class = 'tag'>scala</a>
   
</div>


  
  
  <section class = 'course'>
    <h3>LEARN FP IN SCALA</h3>
    <p>Do you want to master functional Scala and take your career and skills to a whole new level? <a href="https://www.fp-tower.com">Take our course</a></p>
  </section>
</div>

  </aside>
</div>
<div class = "banner">
  <script async data-uid="58e1a4e5c4" src="https://fp-tower.ck.page/58e1a4e5c4/index.js"></script>

</div>
    </main>
<footer class = 'footer'>
  <div class = 'wrap footer_inner'>
    <div class  = 'footer_icons footer_row'>
      <span class = 'font_semibold'>STAY IN TOUCH</span>&nbsp;&nbsp; 
      
      <a href = 'https://twitter.com/TheFpTower' target = '_blank' rel = 'noopener' title = 'follow on twitter' class = 'footer_icon twitter'></a>
      
      <a href = 'https://www.youtube.com/channel/UCaq_IWe10wblAVaA80XH-Qg' target = '_blank' rel = 'noopener' title = 'follow on youtube' class = 'footer_icon youtube'></a>
      
      <a href = 'https://fp-tower.slack.com/' target = '_blank' rel = 'noopener' title = 'follow on slack' class = 'footer_icon slack'></a>
      
      <a href = 'https://github.com/fp-tower' target = '_blank' rel = 'noopener' title = 'follow on github' class = 'footer_icon github'></a>
      
    </div>
    <div class = 'footer_row footer_lower'>
      <span>Copyright 2020 Truffaut Consultancy LTD</span>
      <a class = 'nav_brand' href='https://www.fp-tower.com/'>
        <img src = '/images/logo.png' class = 'footer_logo'>
      </a>
      <div class = 'nav_parent'>
        <a href = 'https://www.fp-tower.com' class = ''>Privacy Policy</a>
        <a href = '' class = ''>.</a>
        <a href = 'https://www.fp-tower.com' class = ''>Terms &amp; Conditions</a>
      </div>
    </div>
  </div>
</footer>

    <script src = 'https://blog.fp-tower.comjs/index.js'></script>
  </body>
</html>
